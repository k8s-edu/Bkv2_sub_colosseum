# 프로모션 애플리케이션

컨테이너 인프라 환경 구축을 위한 쿠버네티스/도커 책 실습 부분에서 예제로 배포되는 애플리케이션입니다. 애플리케이션은 NestJS(node 23)을 사용하여 작성하였으며, 요청으로 받은 집계 점수가 낮은 사용자에게 참여 독려를 위한 처리를 담당하는 서비스입니다.
> Note: 이 애플리케이션을 단일로 구성하기 위해서는 NodeJS 23 버전 이상이 필요합니다.

## 로컬 개발환경
- 정상 동작을 위해 레디스 서버가 필요합니다.
    * 레디스 접속 호스트 설정은 환경변수 `REDIS_HOST`로 IP 혹은 호스트 정보를 설정해야 합니다.
    * 레디스 접속 설정에 필요한 포트 설정은 환경변수 `REDIS_PORT` 로 설정해야 합니다.
    * 레디스 접속에 패스워드가 필요하다면, 환경변수 `REDIS_PASSWORD`로 설정해야 합니다.  
- nodejs 편집이 가능한 에디터를 킵니다.
- 편집기에서 제공하는 터미널 명령 입력기에 `npm run start`으로 프로젝트를 실행할 수 있습니다.

## 컨테이너 이미지 빌드 방법
로그 데이터 확인을 위한 샘플 애플리케이션 빌드는 다음 명령어를 사용합니다.
본인이 사용하는 registry에 따라서 `[registry]` 값을 변경해야 합니다.
```shell
docker buildx build --platform linux/amd64,linux/arm64 \
-t [registry]/promotion-service:log . \
--push
```